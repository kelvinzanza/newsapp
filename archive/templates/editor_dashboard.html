{% extends 'base.html' %}


{% block title %}Editor Dashboard{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8 max-w-5xl">
    <h1 class="text-4xl font-bold text-gray-800 mb-8 text-center">Editor Dashboard</h1>

    <!-- Submitted Articles Section -->
    <section class="mb-10">
        <h2 class="text-3xl font-bold text-gray-700 mb-4">Articles Awaiting Review</h2>
        <div class="space-y-6">
            {% if articles %}
                {% for article in articles %}
                <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 ease-in-out">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-2">{{ article.title }}</h3>
                    <p class="text-sm text-gray-500 mb-2">by {{ article.author.username }}</p>
                    <p class="text-lg text-gray-700 mb-4">{{ article.content|truncatechars:200 }}</p>
                    
                    <div class="flex flex-wrap gap-4">
                        {% if article.status == 'submitted' %}
                            <form action="{% url 'approve_article' article.id %}" method="post" class="inline">
                                {% csrf_token %}
                                <button type="submit" class="bg-green-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-green-700 transition duration-300 shadow-md">Approve</button>
                            </form>
                            <form action="{% url 'reject_article' article.id %}" method="post" class="inline">
                                {% csrf_token %}
                                <button type="submit" class="bg-red-500 text-white font-semibold py-2 px-6 rounded-lg hover:bg-red-600 transition duration-300 shadow-md">Reject</button>
                            </form>
                        {% endif %}
                        {% if article.status == 'approved' %}
                            <form action="{% url 'publish_article' article.id %}" method="post" class="inline">
                                {% csrf_token %}
                                <button type="submit" class="bg-indigo-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-indigo-700 transition duration-300 shadow-md">Publish</button>
                            </form>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <p class="text-center text-gray-500">No articles are currently awaiting review.</p>
            {% endif %}
        </div>
    </section>
    
    <!-- Submitted Newsletters Section -->
    <section>
        <h2 class="text-3xl font-bold text-gray-700 mb-4">Newsletters Awaiting Review</h2>
        <div class="space-y-6">
            {% if newsletters %}
                {% for newsletter in newsletters %}
                <div class="bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 ease-in-out">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-2">{{ newsletter.title }}</h3>
                    <p class="text-sm text-gray-500 mb-2">by {{ newsletter.author.username }}</p>
                    <p class="text-lg text-gray-700 mb-4">{{ newsletter.content|truncatechars:200 }}</p>
                    
                    <div class="flex flex-wrap gap-4">
                        {% if newsletter.status == 'submitted' %}
                            <form action="{% url 'approve_newsletter' newsletter.id %}" method="post" class="inline">
                                {% csrf_token %}
                                <button type="submit" class="bg-green-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-green-700 transition duration-300 shadow-md">Approve</button>
                            </form>
                            <form action="{% url 'reject_newsletter' newsletter.id %}" method="post" class="inline">
                                {% csrf_token %}
                                <button type="submit" class="bg-red-500 text-white font-semibold py-2 px-6 rounded-lg hover:bg-red-600 transition duration-300 shadow-md">Reject</button>
                            </form>
                        {% endif %}
                        {% if newsletter.status == 'approved' %}
                            <form action="{% url 'publish_newsletter' newsletter.id %}" method="post" class="inline">
                                {% csrf_token %}
                                <button type="submit" class="bg-indigo-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-indigo-700 transition duration-300 shadow-md">Publish</button>
                            </form>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <p class="text-center text-gray-500">No newsletters are currently awaiting review.</p>
            {% endif %}
        </div>
    </section>
</div>
{% endblock %}